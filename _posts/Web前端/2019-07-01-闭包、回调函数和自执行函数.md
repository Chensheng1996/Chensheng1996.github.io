---
layout: post
title: JavaScript---闭包、回调函数和自执行函数
date: 2019-07-01
tags: Web前端
---

## 说说你对闭包的理解。
使用闭包主要是为了设计私有的方法和变量。在 JavaScript 中，函数即闭包，只有函数才会产生作用域。
- 闭包的优点：可以避免全局变量的污染；
- 闭包的缺点：闭包会常驻内存，增加内存使用量，使用不当很容易造成内存泄漏。
- 闭包的3个特性：
    1. 函数嵌套函数。
    2. 在函数内部可以引用外部的参数和变量。
    3. 参数和变量不会以垃圾回收机制回收。

## 什么是闭包?
``` js
/**
 * 定义在函数中的函数。
 * closure()的执行需要依赖test()中的变量，因此使得垃圾回收机制不会回收test()所占的资源。
 */
function test() {
    let num = 0;
    let closure = function() {
        console.log("num", num);
    }
    num ++;
    return closure;
}
let m = test();
```

## 什么是回调函数？
``` js
/**
 * 回调函数就是一个通过函数指针调用的函数。
 * 如果把函数的指针（地址）作为参数传递个另一个函数，当这个指针用来调用其所指向的函数时，我们就说这是回调函数。
 */
function test(callback) {
    if(callback) {
        callback();
    }
}
test(function() {
    console.log("我是回调函数");
});
```

## 什么是自执行函数？它有哪些应用场景？有什么好处？
``` js
/**
 * 1.自执行函数是指声明的一个匿名函数，可以立即调用这个匿名函数。
 * 2.作用是创建一个独立的作用域。一般用于框架、插件等场景。
 * 3.好处是防止变量弥散到全局，避免各种Javascript库冲突；
 *   隔离作用域，避免污染，或者截断其作用域链，避免闭包造成引用变量无法释放；
 *   利用立即执行特性，返回需要的业务函数或对象，避免每次用条件判断来处理。
 */

// 写法一 格式：(函数)(实参)
(function(params) {
    console.log(params);
})("Hello World!")

// 写法二 格式：(函数(实参))
(function(params) {
    console.log(params);
}("Hello China!"))
```